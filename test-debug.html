<!DOCTYPE html>
<html>
<head>
    <title>Test Debug - Gouvernement RP</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        button { margin: 10px; padding: 10px; background: blue; color: white; border: none; cursor: pointer; }
        .result { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .error { background: #ffebee; color: red; }
        .success { background: #e8f5e8; color: green; }
        .info { background: #e3f2fd; color: blue; }
    </style>
</head>
<body>
    <h1>ðŸ”§ Test Debug - ProblÃ¨me Services</h1>
    
    <div class="result info">
        <strong>Instructions :</strong>
        <ol>
            <li>Ouvrez la console (F12)</li>
            <li>Cliquez sur les boutons ci-dessous</li>
            <li>Regardez les messages dans la console ET sur cette page</li>
        </ol>
    </div>
    
    <h2>Tests de Base</h2>
    <button onclick="testConsole()">1. Test Console</button>
    <button onclick="testJavaScript()">2. Test JavaScript</button>
    <button onclick="testLocalStorage()">3. Test LocalStorage</button>
    
    <h2>Tests Vue.js</h2>
    <button onclick="testVueDetection()">4. Test DÃ©tection Vue</button>
    
    <div id="results"></div>

    <script>
        console.log('ðŸŸ¢ TEST DEBUG: Script chargÃ©')
        
        function addResult(message, type = 'info') {
            const results = document.getElementById('results')
            const div = document.createElement('div')
            div.className = `result ${type}`
            div.innerHTML = `[${new Date().toLocaleTimeString()}] ${message}`
            results.appendChild(div)
            console.log(`[DEBUG] ${message}`)
        }
        
        // Test 1: Console
        function testConsole() {
            console.log('ðŸ”´ TEST 1: Console fonctionne!')
            console.error('ðŸ”´ TEST 1: Erreur de test (normal)')
            console.warn('ðŸ”´ TEST 1: Warning de test (normal)')
            addResult('âœ… Test Console - Si vous voyez ce message, JavaScript fonctionne', 'success')
        }
        
        // Test 2: JavaScript de base
        function testJavaScript() {
            try {
                const test = { name: 'test', value: 123 }
                const json = JSON.stringify(test)
                addResult(`âœ… Test JavaScript - JSON: ${json}`, 'success')
                
                // Test des promesses
                Promise.resolve('Test Promise').then(result => {
                    addResult(`âœ… Test Promesses - ${result}`, 'success')
                })
            } catch (error) {
                addResult(`âŒ Test JavaScript Ã©chouÃ©: ${error.message}`, 'error')
            }
        }
        
        // Test 3: LocalStorage
        function testLocalStorage() {
            try {
                localStorage.setItem('test-debug', 'test-value')
                const value = localStorage.getItem('test-debug')
                if (value === 'test-value') {
                    addResult('âœ… Test LocalStorage - Fonctionne', 'success')
                } else {
                    addResult('âŒ Test LocalStorage - Valeur incorrecte', 'error')
                }
                localStorage.removeItem('test-debug')
            } catch (error) {
                addResult(`âŒ Test LocalStorage Ã©chouÃ©: ${error.message}`, 'error')
            }
        }
        
        // Test 4: DÃ©tection Vue.js
        function testVueDetection() {
            // VÃ©rifier si Vue est prÃ©sent dans la page principale
            if (window.parent && window.parent !== window) {
                addResult('â„¹ï¸ ExÃ©cution dans une iframe, vÃ©rification du parent...', 'info')
                
                try {
                    if (window.parent.Vue || window.parent.__VUE__) {
                        addResult('âœ… Vue.js dÃ©tectÃ© dans la fenÃªtre parent', 'success')
                    } else {
                        addResult('âŒ Vue.js NOT dÃ©tectÃ© dans la fenÃªtre parent', 'error')
                    }
                } catch (error) {
                    addResult(`âŒ Impossible d'accÃ©der Ã  la fenÃªtre parent: ${error.message}`, 'error')
                }
            } else {
                addResult('â„¹ï¸ Test local, vÃ©rification de l\'URL actuelle...', 'info')
                addResult(`ðŸ“ URL actuelle: ${window.location.href}`, 'info')
                
                if (window.location.href.includes('localhost')) {
                    addResult('âœ… Serveur local dÃ©tectÃ©', 'success')
                } else {
                    addResult('âš ï¸ Pas sur localhost - assurez-vous que votre application Vue tourne', 'error')
                }
            }
        }
        
        // Auto-test au chargement
        window.addEventListener('load', () => {
            addResult('ðŸš€ Page de test chargÃ©e - Cliquez sur les boutons pour diagnostiquer', 'info')
        })
    </script>
</body>
</html> 